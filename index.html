<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>On teste angularJS</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="bower_components/animate.css/animate.min.css" media="screen"/>
    <link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.min.css" media="screen"/>
    <!-- Angular Material style sheet -->



    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- My librairies underscore animate moment materialize angular -->
    <script src="bower_components/angular/angular.js" charset="utf-8"></script>
    <script src="bower_components/moment/moment.js" charset="utf-8"></script>
    <script src="bower_components/materialize/materialize.js" charset="utf-8"></script>
    <script src="bower_components/underscore/underscore-min.js" charset="utf-8"></script>
    <script src="bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>
    <script src="main.js" charset="utf-8"></script>
    <style media="screen">
      .card .card-image img {
        display: inline-block;
        left: 40%;
        width: 20%;
      }
    </style>

  </head>

  <!-- Pour angular, tout le body est une application qui se nomme MyPhonesApp -->
  <!-- ng-X est une directive propre à angularjs -->
  <body ng-app="MyApp">

    <!-- Une applicaton peut contenir un ou plusieurs contrôleurs -->
    <!-- Un contrôleur est une zone de contrôle pour angular -->
    <div class="container" ng-controller="MainCtrl">

      <!-- {{ title }} sert à afficher la variable de la $scope -->
      <h2>{{ title }}</h2>

      <div class="row">   <!-- Carte calculs etc -->
        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Traitement données</span>
              <p ng-show="utilisateurs.length > 1">Nombre d'utilisateurs : {{ utilisateurs.length }}</p>
              <p ng-show="(!utilisateurs.length) || (utilisateurs.length == 1)">Nombre d'utilisateur : {{ utilisateurs.length }}</p>
              <p ng-hide="!utilisateurs.length">Moyenne d'âge : {{ moyenneAge() }} ans</p>
              <p ng-show="(vieux() > utilisateurs.length/2)">Il y a plus de jeunes que de vieux... Soit {{ vieux() }} personnes de moins de 46 ans</p>
            </div>

          </div>
          <div>
            <p>
              Trier par ville : <br>
              <input id="toutes" type="radio" name="region" value="" ng-model="selectedRadioDeMerde">
              <label for="toutes">Toutes</label><br>

              <input id="Lyon" type="radio" name="region" value="Lyon" ng-model="selectedRadioDeMerde">
              <label for="Lyon">Lyon</label><br>

              <input id="Marseille" type="radio" name="region" value="Marseille" ng-model="selectedRadioDeMerde">
              <label for="Marseille">Marseille</label><br>

              <input id="Paris" type="radio" name="region" value="Paris" ng-model="selectedRadioDeMerde">
              <label for="Paris">Paris</label>
            </p>
          </div>
          <div>
            <p>
              Trier par tranche d'âge : <br>
              <input id="tout" type="radio" name="intervalleAge" value="" ng-model="trancheAge">
              <label for="tout">Tout</label><br>
              <input id="1020" type="radio" name="intervalleAge" value="^(([1][0-9])|(20))$" ng-model="trancheAge">
              <label for="1020">10-20 ans</label><br>
              <input id="2030" type="radio" name="intervalleAge" value="^(([2][1-9])|(30))$" ng-model="trancheAge">
              <label for="2030">20-30 ans</label><br>
              <input id="3040" type="radio" name="intervalleAge" value="^(([3][1-9])|(40))$" ng-model="trancheAge">
              <label for="3040">30-40 ans</label><br>
              <input id="4050" type="radio" name="intervalleAge" value="^([4][1-9])|(50)$" ng-model="trancheAge">
              <label for="4050">40-50 ans</label><br>
              <input id="50plus" type="radio" name="intervalleAge" value="^(5[1-9]|[6-9][0-9])$" ng-model="trancheAge">
              <label for="50plus">50 ans et plus</label><br>
            </p>
          </div>
        </div>
      </div>

      <input type="date" ng-change="filtre" ng-model="filtre">



      <div class="collection" ng-repeat="user in utilisateurs | filter:selectedRadioDeMerde | orderTab:trancheAge | filtreAge:filtre" >
        <div class="card col m3">
            <div class="collection-item">
              <div class="card-image">
                <img src="{{user.photo}}">
                <h4>{{ user.prenom }} {{ user.nom }}</h4>
                <label></label>
                <button ng-click="suppUser(user)" type="button" name="button"><i class="material-icons">delete</i></button>
              </div>
              <div class="card-content">
                <p>Date de naissance : {{ user.birth }} - {{ user.age }} ans</p>
                <p>Sexe : {{ user.sexe }}</p>
                <p>Ville : {{ user.ville }}</p>
                <p>Note du Baccalauréat : {{ user.noteBac }}/20</p>
                <p>Langue : {{ user.langue }}</p>
              </div>
              <div class="card-content">
                <h3>Biographie</h3>
                <p>{{ user.bio }}</p>
              </div>

            </div>
          </div>
        </div>

    </div>   <!-- Fin de container MainCtrl -->
  </body>
</html>
